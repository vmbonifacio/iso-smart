<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:webjars="http://webjars.org/ui"
                webjars:assetLocator="org.webjars.WebJarAssetLocator">

    <ui:define name="head">
        <h:outputStylesheet library="webjars" name="bootstrap/5.2.3/css/bootstrap.min.css" />
    </ui:define>

    <ui:define name="title">Consecuencia</ui:define>

    <ui:define name="viewname">
        <li>FORMULARIO</li>
        <li><i class="pi pi-chevron-right"></i></li>
        <li>CONSECUENCIA</li>
        <li><i class="pi pi-chevron-right"></i></li>
        <li>INCIDENTE</li>
    </ui:define>

    <ui:define name="content">
        <h:form>
            <h5 class="h-5rem text-center text-4xl p-4 text-white-alpha-90" 
                style="background-color: #2A2A2A;
                font-family: 'Inter', sans-serif;
                font-weight: 600;">
                REGISTRO DE INCIDENTES
            </h5>

            <div class="col-12 p-3" > 
                <!-- DATOS DEL EMPLEADOR PRINCIPAL -->  
                <div class="ui-fluid formgrid grid pl-2"
                     style="border-radius: 1rem 1rem 0 0;
                     border-bottom: none;
                     background-color: #F8DA45;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">
                    <h5 class="p-3 text-2xl"
                        style="font-family: 'Inter', sans-serif;
                        font-weight: 600;
                        color: black;">
                        DATOS DEL EMPLEADOR PRINCIPAL
                    </h5>  
                </div>

                <div class="ui-fluid formgrid grid"  
                     style="background-color: #EDEDED;
                     margin-bottom: 70px;
                     padding: 30px 90px 30px 90px;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                     border-radius: 0 0 1rem 1rem;">

                    <!-- RAZON SOCIAL O DENOMINACION SOCIAL -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="social" value="1. Razón Social o Denominacion Social"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="social" class="w-full" 
                                     placeholder="Ingrese la razón o denominación social" 
                                     style="background:transparent; color: black; border: none; border-bottom: 3px solid  #f8da45;"
                                     value="#{tercerosManagedBean. selectedEmpresaP.razon_s}" readonly="true" />
                    </div>

                    <!-- RUC -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="ruc" value="2. RUC"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />    
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="ruc" class="w-8" placeholder="Ingrese el RUC" 
                                     style="background:transparent; color: black; border: none; border-bottom: 3px solid  #f8da45;"
                                     value="#{tercerosManagedBean.selectedEmpresaP.ruc}" readonly="true"/>
                    </div>

                    <!-- DOMICILIO -->  

                    <div class="ui-fluid formgrid grid p-4 w-full shadow-5"  
                         style="background-color: #f8da45; border-radius: 5px; margin: auto;margin-top:10px;margin-bottom:20px;">
                        <div class="field col-12 md:col-4">
                            <p:outputLabel for="social" value="3. Domicilio"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />    
                        </div>

                        <div class="field col-12 md:col-2">                                
                            <p:outputLabel for="departamentop" value="Departamento"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />

                            <div class="field col-12 md:col-6" style="padding-left: 0px;">
                                <p:inputText id="departamentop" class="w-13rem" placeholder="Ingrese el RUC" 
                                             style="background:transparent; border: none; border-bottom: 3px solid black;color: black;"
                                             value="#{tercerosManagedBean.selectedEmpresaP.departamento}" readonly="true"/>
                            </div>
                        </div>

                        <div class="field col-12 md:col-2" >
                            <p:outputLabel for="provinciap" value="Provincia"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />

                            <div class="field col-12 md:col-6" style="padding-left: 0px;">
                                <p:inputText id="provinciap" class="w-13rem" placeholder="Ingrese el RUC" 
                                             style="background:transparent; border: none; border-bottom: 3px solid black;color: black;"
                                             value="#{tercerosManagedBean.selectedEmpresaP.provincia}" readonly="true"/>
                            </div>
                        </div>

                        <div class="field col-12 md:col-2">
                            <p:outputLabel for="distritop" value="Distrito"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />

                            <div class="field col-12 md:col-6" style="padding-left: 0px;">
                                <p:inputText id="distritop" class="w-13rem" placeholder="Ingrese el RUC" 
                                             style="background:transparent; border: none; border-bottom: 3px solid black;color: black;"
                                             value="#{tercerosManagedBean.selectedEmpresaP.distrito}" readonly="true"/>
                            </div>
                        </div>

                        <div class="field col-12 md:col-4">
                            <p:outputLabel for="direccion" value="Dirección"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                        </div>

                        <div class="field col-12 md:col-6">
                            <p:inputText id="direccion" class="w-34rem" placeholder="Ingrese el RUC" 
                                         style="background:transparent; border: none; border-bottom: 3px solid black;color: black;"
                                         value="#{tercerosManagedBean.selectedEmpresaP.direccion}" readonly="true"/>
                        </div>
                    </div>

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="tipo" value="4. Tipo de actividad económica"  class="pt-2 " style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="tipo" class="w-8" 
                                     placeholder="Ingrese aqui el tipo de actividad económica" 
                                     style="background:transparent; border: none; border-bottom: 3px solid #f8da45; color: black;"
                                     value="#{tercerosManagedBean.selectedEmpresaP.actividad}" readonly="true"/>
                    </div>


                    <!-- NUM TRABAJADORES -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="trabajadores" value="5. Número de trabajadores en el centro laboral" class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="trabajadores" class="w-8 "
                                     placeholder="Ingrese aqui el número de trabajadores en el centro laboral"
                                     style="background:transparent; border: none; border-bottom: 3px solid #f8da45; color: black;" readonly="true"/>
                    </div>

                    <!--COMPLETAR EN CASO DE ACTIVIDADES-->

                    <div class="ui-fluid formgrid grid border-round-sm w-full m-0 border-y-2"  style="background-color: transparent; border-color: #cbcbcb;">
                        <div class="field col-12 md:col-3 w-full pt-2 pl-4 text-lg" style="color: black;font-family: 'Inter', sans-serif; font-weight: 600;">6. COMPLETAR EN CASO DE QUE LAS ACTIVIDADES DEL EMPLEADOR SEAN CONSIDERADAS DE ALTO RIESGO</div>

                        <!-- NUM. TRABAJADORES  AFILIADOS SCTR -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="afiliado" class="pt-2" value="N° de trabajadores afiliados al SCTR" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0; text-align:center; border-radius: 1rem 0 0 0;" />

                            <p:inputText id="afiliado"  placeholder="Ingrese aquí los trabajadores afiliados" 
                                         style="background:#f8da45; color: black; border-radius: 0 0 0 1rem;"/>
                        </div>

                        <!-- NUM. TRABAJADORES  NO AFILIADOS -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="nafiliado" class="pt-2" value="N° de trabajadores NO afiliados al SCTR" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0;text-align:center; border-left: 3px solid white;"/>

                            <p:inputText id="nafiliado" placeholder="Ingrese trabajadores no afilidos"
                                         style="background:#f8da45; color: black; border: none; border-left: 3px solid white; "/>
                        </div>

                        <!-- NOMBRE ASEGURADORA -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="nombrea" class="pt-2" value="Nombre de la aseguradora" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0;text-align:center; border-left: 3px solid white; border-radius: 0 1rem 0 0;"/>

                            <p:inputText id="nombrea" placeholder="Ingrese aquí el nombre" 
                                         style="background:#f8da45; color: black; border: none; border-left: 3px solid white; border-radius: 0 0 1rem 0;"/>
                        </div>
                    </div>
                </div>

                <!-- DATOS DEL EMPLEADOR TERCIARIO -->

                <div class="ui-fluid formgrid grid pl-2"
                     style="border-radius: 1rem 1rem 0 0;
                     border-bottom: none;
                     background-color: #F8DA45;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">
                    <h5 class="p-3 text-2xl"
                        style="font-family: 'Inter', sans-serif;
                        font-weight: 600;
                        color: black;">
                        DATOS DEL EMPLEADOR DE INTERMEDIACIÓN, 
                        TERCERIZACIÓN, CONTRATISTA, SUBCONTRATISTA U OTROS
                        (completar solo si contrata servicios de intermediación o tercerización)
                    </h5>  
                </div>

                <div class="ui-fluid formgrid grid"  
                     style="background-color: #EDEDED;
                     margin-bottom: 70px;
                     padding: 30px 90px 30px 90px;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                     border-radius: 0 0 1rem 1rem;">

                    <!-- RAZON SOCIAL O DENOMINACION SOCIAL -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="social2" value="7. Razón Social o Denominacion Social"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />    
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="social2"  class="w-full" 
                                     placeholder="Ingrese la razón o denominación social" 
                                     style="background:transparent; color: black; border: none; border-bottom: 3px solid  #f8da45;"
                                     value="#{tercerosIncManagedBean.terceroInc.razon_social}"/>
                    </div>

                    <!-- RUC -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="ruc1" value="8. RUC"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />    
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="ruc1" value="#{tercerosIncManagedBean.terceroInc.ruc}"  class="w-8" placeholder="Ingrese el ruc" style="background:transparent; color: black; border: none; border-bottom: 3px solid  #f8da45;"/>
                    </div>

                    <!-- DOMICILIO  -->  

                    <div class="ui-fluid formgrid grid p-4 w-full shadow-5"  
                         style="background-color: #f8da45; border-radius: 5px; margin: auto;margin-top:10px;margin-bottom:20px;">
                        <div class="field col-12 md:col-4">
                            <p:outputLabel value="9. Domicilio"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />    
                        </div>

                        <!-- UBIGEO -->

                        <div class="field col-12 md:col-2">                                
                            <p:outputLabel for="departamento" value="Departamento"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                            <p:selectOneMenu id="departamento" value="#{tercerosIncManagedBean.terceroInc.departamento}" style="background:transparent; border: none; border-bottom: 3px solid black; color: black;">
                                <f:selectItem itemLabel="Seleccione un departamento" noSelectionOption="departamentotrue" />
                                <f:selectItems value="#{ubigeo.listaDepartamentos}" var="departamento"
                                               itemValue="#{departamento}" itemLabel="#{departamento}" />
                                <f:ajax listener="#{ubigeo.obtenerListaProvincias(tercerosIncManagedBean.terceroInc.departamento)}" render="provincia distrito" />
                            </p:selectOneMenu>
                        </div>

                        <div class="field col-12 md:col-2">
                            <p:outputLabel for="provincia" value="Provincia"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                            <p:selectOneMenu id="provincia" value="#{tercerosIncManagedBean.terceroInc.provincia}" style="background:transparent; border: none; border-bottom: 3px solid black; color: black;">
                                <f:selectItem itemLabel="Seleccione una provincia" noSelectionOption="true" />
                                <f:selectItems value="#{ubigeo.listaProvincias}" var="provincia"
                                               itemValue="#{provincia}" itemLabel="#{provincia}" />
                                <f:ajax listener="#{ubigeo.obtenerListaDistritos(tercerosIncManagedBean.terceroInc.provincia)}" render="distrito" />
                            </p:selectOneMenu>
                        </div>

                        <div class="field col-12 md:col-2">
                            <p:outputLabel for="distrito" value="Distrito"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                            <p:selectOneMenu id="distrito" value="#{tercerosIncManagedBean.terceroInc.distrito}" style="background:transparent; border: none; border-bottom: 3px solid black; color: black;">
                                <f:selectItem itemLabel="Seleccione un distrito" noSelectionOption="true" />
                                <f:selectItems value="#{ubigeo.listaDistritos}" var="distrito"
                                               itemValue="#{distrito}" itemLabel="#{distrito}" />
                            </p:selectOneMenu>
                        </div>

                        <!-- DIRECCION  --> 
                        <div class="field col-12 md:col-4">
                            <p:outputLabel for="direccion1" value="Dirección"  style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;" />
                        </div>
                        <div class="field col-12 md:col-6">
                            <p:inputText id="direccion1" value="#{tercerosIncManagedBean.terceroInc.direccion}" placeholder="Ingrese aquí su dirección" style="background:transparent;border:none; border-bottom:3px solid black; color: black;"/>
                        </div>
                    </div>

                    <!-- ACTIVIDAD ECONÓMICA  --> 

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="tipo2" value="10. Tipo de actividad económica"  class="pt-2 " style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="tipo2" value="#{tercerosIncManagedBean.terceroInc.a_economica}" class="w-8" 
                                     placeholder="Ingrese aqui el tipo de actividad económica" 
                                     style="background:transparent; border: none; border-bottom: 3px solid #f8da45; color: black;"/>
                    </div>

                    <!-- NUM DE TRABAJADORES  --> 

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="trabajadores2" value="11. Número de trabajadores en el centro laboral"  class="pt-2" style="color: black; font-family: 'Inter', sans-serif; font-weight: 600;"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <p:inputText id="trabajadores2" value="#{tercerosIncManagedBean.terceroInc.n_trabajadores}" class="w-8 " 
                                     placeholder="Ingrese aqui el número de trabajadores en el centro laboral" 
                                     style="background:transparent; border: none; border-bottom: 3px solid #f8da45; color: black;"/>
                    </div>

                    <!-- COMPLETAR EN CASO DE ACTIVIDADES -->

                    <div class="ui-fluid formgrid grid border-round-sm w-full m-0 border-y-2"  style="background-color: transparent; border-color: #cbcbcb;">
                        <div class="field col-12 md:col-3 w-full pt-2 pl-4 text-lg" style="color: black;font-family: 'Inter', sans-serif; font-weight: 600;">12. COMPLETAR EN CASO DE QUE LAS ACTIVIDADES DEL EMPLEADOR SEAN CONSIDERADAS DE ALTO RIESGO</div>

                        <!-- TRABAJADORES CON SCTR -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="afiliado1" class="pt-2" value="N° de trabajadores afiliados al SCTR" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0;text-align:center; border-radius: 1rem 0 0 0;" />

                            <p:inputText id="afiliado1" value="#{tercerosIncManagedBean.terceroInc.n_trabajadores_sctr}" 
                                         placeholder="Ingrese aquí los trabajadores afiliados" 
                                         style="background:#f8da45; color: black; border: none; border-radius: 0 0 0 1rem;"/>
                        </div>

                        <!-- TRABAJADORES SIN SCTR -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="nafiliado1" class="pt-2" value="N° de trabajadores NO afiliados al SCTR" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0;text-align:center; border-left: 3px solid white;"/>

                            <p:inputText id="nafiliado1" value="#{tercerosIncManagedBean.terceroInc.n_trabajadores_nosctr}" 
                                         placeholder="Ingrese trabajadores no afilidos" 
                                         style="background:#f8da45; color: black; border: none; border-left: 3px solid white;"/>
                        </div>

                        <!-- NOMBRE DE LA ASEGURADORA -->

                        <div class="field md:col-4" style="padding-left: 0px; padding-right: 0px">
                            <p:outputLabel for="nombrea1" class="pt-2" value="Nombre de la aseguradora" style="color: white; background-color: #20212b;width: 100%;height:40px; margin-bottom:0;text-align:center; border-left: 3px solid white; border-radius: 0 1rem 0 0;"/>

                            <p:inputText id="nombrea1" value="#{tercerosIncManagedBean.terceroInc.n_aseguradora}" 
                                         placeholder="Ingrese aquí el nombre" 
                                         style="background:#f8da45; color: black; border: none; border-left: 3px solid white; border-radius: 0 0 1rem 0;"/>
                        </div>

                        <!-- BOTON REGISTRAR -->

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mb-3 mt-2">
                            <p:commandButton style="color: white; font-family: 'Inter', sans-serif; font-weight: 600; background-color: #741818; height: 50px; border-color: #741818; border-radius: 14px; box-shadow: 0px 1px 7px rgba(0, 0, 0, 0.1), 0px 4px 5px -2px rgba(0, 0, 0, 0.12), 0px 10px 15px -5px rgba(0, 0, 0, 0.2) !important;" 
                                             action="#{tercerosIncManagedBean.agregarRegistroTerceroInc}" update="tablaTerceros"
                                             value="Agregar Empleador de terceros"/>
                        </div>

                        <!-- TABLA TRABAJADORES -->

                        <p:dataTable id="tablaTerceros" value="#{tercerosIncManagedBean.obtenerRegistrosTercerosInc()}" var="terinc"  style="box-shadow: 0px 3px 15px 3px rgba(43,43,43,1); margin-top: 24px;" rowKey="#{terinc.id_empresa_ti}" emptyMessage="No se encontraron registros" reflow="true" rows="4" paginator="true" >
                            <p:column headerText="ID" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.id_empresa_ti}"/>
                            </p:column>

                            <p:column headerText="Razón Social" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.razon_social}" />
                            </p:column>

                            <p:column headerText="RUC" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.ruc}" />
                            </p:column>

                            <p:column headerText="Departamento" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.departamento}" />
                            </p:column>

                            <p:column headerText="Provincia" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.provincia}" />
                            </p:column>

                            <p:column headerText="Distrito" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.distrito}" />
                            </p:column>

                            <p:column headerText="Direccion" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.direccion}" />
                            </p:column>

                            <p:column headerText="Actividad económica" style="border: 1px solid white;">
                                <h:outputText value="#{terinc.a_economica}" />
                            </p:column>

                            <p:column headerText="Acción" style="border: 1px solid white;">
                                <p:commandButton oncomplete="PF('dlgEditar').show()" 
                                                 process="@this"
                                                 icon="pi pi-pencil"
                                                 styleClass="rounded-button ui-button-success" >

                                    <f:setPropertyActionListener target="#{tercerosIncManagedBean.selectedTerceroInc}" value="#{ter}" />
                                </p:commandButton>

                                <p:commandButton icon="pi pi-times" 
                                                 styleClass="rounded-button ui-button-danger"
                                                 action="#{tercerosIncManagedBean.eliminarRegistroTerceroInc(terinc.id_empresa_ti)}" 
                                                 update="@form" />
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>

                <div class="w-full" style="background-color: transparent;">
                    <div class="p-toolbar" style="display: flex; justify-content: flex-end; align-items: center;">
                        <div style="margin-left: auto;">
                            <p:button outcome="formPrincipalOcurrencia" value="Regresar"
                                      styleClass="ui-button-raised ui-button-warning"
                                      style="background-color: #2A2A2A; color: #FFF600; font-family: 'Inter', sans-serif; font-weight: 600; border-radius: 10px; width: 210px; height: 50px; border-color: #2A2A2A;" />
                            <p:commandButton value="Siguiente" onclick="RedirigirPagina()"
                                             styleClass="ui-button-raised ui-button-warning"
                                             style="background-color: #FFF600; color: black; font-family: 'Inter', sans-serif; font-weight: 600; border-radius: 10px; width: 210px; height: 50px; margin-left: 10px; border-color:  #FFF600;"
                                             action="#{ocurrenciaManagedBean.guardarInformacionAdicional}" />
                        </div>
                    </div>
                </div>

                <!-- FUNCIONALIDAD DE LAS VENTANAS EMERGENTES -->

                <script>
                    function RedirigirPagina() {
                        // Redirige a la página deseada
                        window.location.href = "formIncidente2.xhtml"; // Reemplaza "otraPagina.xhtml" con la URL válida de la página a la que deseas redirigir
                    }
                </script>

            </div>
        </h:form>
    </ui:define>
</ui:composition>