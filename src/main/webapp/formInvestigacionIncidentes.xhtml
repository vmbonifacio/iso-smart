<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:webjars="http://webjars.org/ui"
                webjars:assetLocator="org.webjars.WebJarAssetLocator">

    <ui:define name="head">
        <h:outputStylesheet library="webjars" name="bootstrap/5.2.3/css/bootstrap.min.css" />

        <style>
            .table-black {
                color: black;
                border-collapse: separate;
                border-spacing: 0;
            }

            .table-black th,
            .table-black td {
                border: 1px solid black;
                padding: 5px;
            }

            .table-container {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
            }

        </style>

    </ui:define>

    <ui:define name="title">Investigación</ui:define>

    <ui:define name="viewname">
        <li>REGISTRO DE INVESTIGACION</li>
        <li><i class="pi pi-chevron-right"></i></li>
        <li>INVESTIGACION DE INCIDENTES</li>
    </ui:define>

    <ui:define name="content">
        <h:form>
            <!-- REGISTRO DE INVESTIGACION -->  
            <h5 class="h-5rem text-center text-4xl p-4 text-white-alpha-90" 
                style="background-color: #2A2A2A;
                font-family: 'Inter', sans-serif;
                font-weight: 600;">
                INVESTIGACIÓN DE INCIDENTES
            </h5>

            <div class="card col-12" style="background-color: #2A2A2A"> 
                <!-- DATOS DEL EMPLEADOR PRINCIPAL -->  
                <div class="ui-fluid formgrid grid pl-2"
                     style="border-radius: 1rem 1rem 0 0;
                     border-bottom: none;
                     background-color: #F8DA45;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">
                    <h5 class="p-3 text-2xl"
                        style="font-family: 'Inter', sans-serif;
                        font-weight: 600;
                        color: black;">
                        INVESTIGACIÓN DE INCIDENTES DE TRABAJO
                    </h5>  
                </div>

                <div class="ui-fluid formgrid grid"  
                     style="background-color: #EDEDED;
                     border: 1px solid #cbcbcb;
                     border-radius: 0 0 1rem 1rem;
                     margin-bottom: 70px;
                     padding: 30px 36px 30px 36px;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">

                    <!-- FECHA DE ACCIDENTE DEL TRABAJO -->  
                    <div class="field col-12 md:col-4">
                        <p:outputLabel value="1. Marca sí es un incidente o un incidente peligroso"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;
                                       margin-bottom: 15px;" />    

                        <p:selectOneRadio id="Incidente" style="color: black; font-family: 'Inter', sans-serif; font-weight: 400;" onchange="mostrarOcultarFormulario()">
                            <f:selectItem itemLabel="Incidente" itemValue="Incidente"/>
                            <f:selectItem itemLabel="Incidente Peligroso" itemValue="Incidente Peligroso"/>
                        </p:selectOneRadio>
                    </div>

                    <div id="formularioContainer" class="ui-g-12" style="display: none;">
                        <p:inputTextarea id="descripcionAccidente" rows="5" cols="30" maxlength="250" autoResize="false" placeholder="Ingrese aquí la descripción del accidente"/>
                    </div>

                    <div class="ui-fluid formgrid grid pl-2"
                         style="border-radius: 1rem 1rem 1rem 1rem;
                         border-bottom: none;
                         background-color: #F8DA45;
                         box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                         margin: 35px 35px 35px 280px;">

                        <div class="field col-12 md:col-6" style="padding-top: 35px; padding-left: 15px;">
                            <p:outputLabel value="N° de trabajadores potencialmente afectados"  class="pt-2" style="color: black;
                                           font-family: 'Inter', sans-serif;
                                           font-weight: 400;
                                           margin-bottom: 15px;" /> 

                            <p:inputText  id="cantidadUno" value="#{investigacionAcciManagedBean.selectedInvestigacion.lugar_acci}"  placeholder="Ingrese la cantidad de trabajadores" style="background:transparent;
                                          color: black;
                                          border: none;
                                          border-bottom: 2px solid #7e7b6d;
                                          border-radius: 0;
                                          outline: none;
                                          margin-bottom: 30px;"/>
                        </div>

                        <div class="field col-12 md:col-6" style="padding-top: 35px; padding-right: 20px;">
                            <p:outputLabel value="N° de civiles potencialmente afectados"  class="pt-2" style="color: black;
                                           font-family: 'Inter', sans-serif;
                                           font-weight: 400;
                                           margin-bottom: 15px; " /> 

                            <p:inputText  id="cantidadDos" value="#{investigacionAcciManagedBean.selectedInvestigacion.lugar_acci}"  placeholder="Ingrese la cantidad de trabajadores" style="background:transparent;
                                          color: black;
                                          border: none;
                                          border-bottom: 2px solid #7e7b6d;
                                          border-radius: 0;
                                          outline: none;
                                          margin-bottom: 30px;"/>
                        </div>
                    </div>

                    <script>
                        function mostrarOcultarFormulario() {
                            var radio = document.querySelector("input[name='form:Incidente']:checked");
                            var formularioContainer = document.getElementById("formularioContainer");

                            if (radio.value === "Incidente Peligroso") {
                                formularioContainer.style.display = "block"; // Muestra el formulario
                            } else {
                                formularioContainer.style.display = "none"; // Oculta el formulario
                            }
                        }
                    </script>

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="fecha" value="2. Fecha del Accidente Ocurrido"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;
                                       margin-bottom: 15px;" />    

                        <p:datePicker id="fecha" placeholder="Seleccione la fecha" style="background-color: white;
                                      color: black;
                                      border: 1px solid #F8DA45;
                                      border-radius: 7px;
                                      margin-bottom: 30px;"/>
                    </div>

                    <!-- HORA DE ACCIDENTE DEL TRABAJO -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="timeonly" value="3. Hora del Accidente Ocurrido"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;
                                       margin-bottom: 15px;" />    
                        <p:datePicker id="timeonly" placeholder="Seleccione la hora del accidente" timeOnly="true" pattern="HH:mm" style="background-color: white;
                                      color: black;
                                      border: 1px solid #F8DA45;
                                      border-radius: 7px;
                                      margin-bottom: 30px;"/>
                    </div>


                    <!-- FECHA DE INVESTIGACION -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel for="fechaIn" value="4. Fecha de la Investigación"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;
                                       margin-bottom: 15px;" />    
                        <p:datePicker id="fechaIn" placeholder="Seleccione la fecha" style="background-color: white;
                                      color: black;
                                      border: 1px solid #F8DA45;
                                      border-radius: 7px;
                                      margin-bottom: 30px;"/>
                    </div>

                    <!-- LUGAR DEL ACCIDENTE -->  

                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="Lugar" value="5. Lugar exacto del incidente"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;
                                       margin-bottom: 15px;" />    
                        <p:inputText  id="Lugar" value="#{investigacionAcciManagedBean.selectedInvestigacion.lugar_acci}"  placeholder="Ingrese aquí el lugar donde ocurrio el accidente" style="background:transparent;
                                      color: black;
                                      border: none;
                                      border-bottom: 2px solid #F8DA45;
                                      border-radius: 0;
                                      outline: none;
                                      margin-bottom: 30px;"/>
                    </div>

                    <!-- MOSTRAR Y OCULTAR CONTENIDO FALTAS DE CONTROL -->  

                </div>    

                <!-- CALIFICACION DE RIESGOS -->  

                <div class="ui-fluid formgrid grid pl-2 "
                     style="box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                     border-radius: 1rem 1rem 0 0;
                     border-bottom: none;
                     background-color: #F8DA45;">
                    <h5 class="p-3 text-2xl"
                        style="font-family: 'Inter', sans-serif;
                        font-weight: 600;
                        color: black;">
                        CALIFICACIÓN DE RIESGOS DEL ACCIDENTE
                    </h5>   
                </div>

                <div class="ui-fluid formgrid grid"   
                     style="border-radius: 0 0 1rem 1rem;
                     background-color: #EDEDED;
                     margin-bottom: 70px;
                     padding: 30px 36px 30px 36px;
                     box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">

                    <!-- PROCEDIMIENTOS EXISTENTES -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel value="1.1. Procedimientos Existentes"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;" />    
                        <p:selectOneMenu id="Procedimiento">
                            <f:selectItem itemLabel="Ingrese el valor de los procedimientos" noSelectionOption="true"/>
                            <f:selectItems value="#{investigacionAManagedBean.obtenerListaProcedimiento()}" var="proc" itemValue="#{proc}" itemLabel="#{proc}"/>
                        </p:selectOneMenu>
                    </div>

                    <!-- CAPACITACION -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel value="1.2. Capacitación"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;" />    
                        <p:selectOneMenu id="Capacitacion">
                            <f:selectItem itemLabel="Ingrese el valor de los procedimientos" noSelectionOption="true"/>    
                            <f:selectItems value="#{investigacionAManagedBean.obtenerListaCapacitacion()}" var="capa" itemValue="#{capa}" itemLabel="#{capa}"/>
                        </p:selectOneMenu>
                    </div>


                    <!-- EXPOSICION AL RIESGO -->  

                    <div class="field col-12 md:col-4">
                        <p:outputLabel value="1.3. Exposición al riesgo"  class="pt-2" style="color: black;
                                       font-family: 'Inter', sans-serif;
                                       font-weight: 400;" />    
                        <p:selectOneMenu id="Exposicion">
                            <f:selectItem itemLabel="Ingrese el valor de exposición al riesgo" noSelectionOption="true"/>
                            <f:selectItems value="#{investigacionAManagedBean.obtenerListaExposicion()}" var="expo" itemValue="#{expo}" itemLabel="#{expo}"/>
                        </p:selectOneMenu>
                    </div>

                    <div class="field col-12" style="display: flex;
                         justify-content: center; ">
                        <p:button value="Agregar Calificaciòn" styleClass="ui-button-raised mr-2 mb-2" style="width: 200px;
                                  height: 50px;
                                  color: white;
                                  background-color: #741818;
                                  font-family: 'Inter', sans-serif;
                                  font-weight: 600;
                                  border: none"/>
                    </div>
                    <!--<div class="container">-->
                    <!-- importar imagenes -->
                    <!-- <h:graphicImage library="img" name="prueba.png" alt="Mi imagen" style="width: 200px; height: 150px;" />-->
                    <!--</div>-->

                    <!-- Código XHTML para crear la tabla con componentes PrimeFaces -->
                    <div class="field col-12 pt-6" >
                        <h:form>
                            <p:dataTable id="tablaCalificacion" value="#{investigacionAcciManagedBean}" var="InvestAcci" editable="true" emptyMessage="Registro de investigación en desarrollo."  style=" border-radius: 10px;
                                         box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                                         border-radius: 1rem 1rem 0 0;
                                         border-bottom: none;" >
                                <p:columnGroup type="header">
                                    <p:row>
                                        <p:column colspan="6" headerText="ÍNDICE DE PROBABILIDAD" style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                                                  border-radius: 1rem 1rem 0 0;
                                                  border-bottom: none;
                                                  font-family: 'Inter', sans-serif;
                                                  font-weight: 800;"/>
                                    </p:row>
                                    <p:row>
                                        <p:column style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                        <p:column headerText="Personas Expuestas" style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                        <p:column headerText="Procedimientos existentes" style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                        <p:column headerText="Capacitacion" style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                        <p:column headerText="Exposicion al riesgo" style="text-align: center;
                                                  background-color: #20212B;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                        <p:column headerText="Puntaje" style="text-align: center;
                                                  background-color: #0F204E;
                                                  color: white;
                                                  border: 1px solid white;"/>
                                    </p:row>
                                </p:columnGroup>

                                <!-- Resto de las columnas y registros -->
                                <p:column>
                                    <h:outputText value=""/>
                                </p:column>
                                <p:column>
                                    <h:outputText  value=""/>
                                </p:column>
                                <p:column>
                                    <h:outputText  value=""/>
                                </p:column>
                                <p:column>
                                    <h:outputText  value=""/>
                                </p:column>
                                <p:column>
                                    <h:outputText  value=""/>
                                </p:column>
                                <p:column>
                                    <h:outputText  value=""/>
                                </p:column>
                            </p:dataTable>      
                        </h:form>
                    </div>
                </div>    
                <!-- <div class="field col-12" style="display: flex; justify-content: center; ">-->
                <!--    <button type="button" class="btn btn-outline-primary">Primary</button>-->
                <!--    <button type="button" class="btn btn-outline-secondary">Secondary</button>-->
                <!--    <button type="button" class="btn btn-outline-success">Success</button>-->
                <!--     <button type="button" class="btn btn-outline-danger">Danger</button>-->
                <!--     <button type="button" class="btn btn-outline-warning">Warning</button>-->
                <!--  </div>-->

                <div class="w-full" style="background-color: transparent;">
                    <div class="p-toolbar" style="display: flex; justify-content: flex-end; align-items: center;">
                        <div style="margin-left: auto;">
                            <p:button outcome="formPrincipalInvestigacion" value="Regresar" styleClass="ui-button-raised ui-button-warning"
                                      style="background-color: #2A2A2A; color: #FFF600; font-family: 'Inter', sans-serif; font-weight: 600; border-radius: 10px; width: 210px; height: 50px; border-color: #2A2A2A;" />
                            <p:button outcome="formInvestigacionTwo" value="Siguiente" styleClass="ui-button-raised ui-button-warning"
                                      style="background-color: #FFF600; color: black; font-family: 'Inter', sans-serif; font-weight: 600; border-radius: 10px; width: 210px; height: 50px; margin-left: 10px; border-color:  #FFF600;" />
                        </div>
                    </div>
                </div>
            </div>   
        </h:form>
    </ui:define>
</ui:composition>